  <footer>
  {{ partial "foot_custom.html" . }}
  <hr>
  {{ partial "footer_highlightjs" . }}
  {{ with .Site.Params.footer }}
  <div class="copyright">{{ . | markdownify }}</div>
  {{ end }}
  </footer>
  </article>
  {{ template "_internal/google_analytics.html" . }}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const ul = document.querySelector('.main > ul');
      if (!ul) return;
    
      const items = Array.from(ul.children);
      let currentYear = null;
    
      items.forEach(item => {
        const dateSpan = item.querySelector('.date');
        if (!dateSpan) return;
    
        const year = dateSpan.textContent.split('/')[0];
        if (year !== currentYear) {
          const yearGroup = document.createElement('li');
          yearGroup.className = 'year-group';
          yearGroup.textContent = year;
          ul.insertBefore(yearGroup, item);
          currentYear = year;
        }
      });
    });
    </script>
  <script>
    // 立即执行的函数，避免污染全局作用域
    (function() {
        function parseMarkdownImages() {
            const datacontElements = document.querySelectorAll('.datacont');
            
            datacontElements.forEach(element => {
                let content = element.innerHTML;
                
                // 将Markdown图片语法转换为HTML图片标签
                content = content.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">');
                
                element.innerHTML = content;
            });
            
            console.log('Markdown images parsed');  // 添加这行来确认脚本执行
        }
    
        // 当DOM加载完成时执行解析
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', parseMarkdownImages);
        } else {
            parseMarkdownImages();
        }
    })();
    </script>
  </body>
</html>
